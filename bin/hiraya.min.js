(function(t,e,i){function n(i,s){if(!e[i]){if(!t[i]){var a="function"==typeof require&&require;if(!s&&a)return a(i,!0);if(r)return r(i,!0);throw Error("Cannot find module '"+i+"'")}var o=e[i]={exports:{}};t[i][0].call(o.exports,function(e){var r=t[i][1][e];return n(r?r:e)},o,o.exports)}return e[i].exports}for(var r="function"==typeof require&&require,s=0;i.length>s;s++)n(i[s]);return n})({1:[function(t,e){var i={Class:t("./hiraya-core/class"),Emitter:t("./hiraya-core/emitter"),Collection:t("./hiraya-core/collection"),Stat:t("./hiraya-game/stat"),Stats:t("./hiraya-game/stats"),EntityTurnBased:t("./hiraya-game/entity-turnbased"),Entity:t("./hiraya-game/entity"),Game:t("./hiraya-game/game"),Tile:t("./hiraya-game/tile"),Tiles:t("./hiraya-game/tiles"),Level:t("./hiraya-game/level"),LevelTurnBased:t("./hiraya-game/level-turnbased")};"object"==typeof window&&(window.Hiraya=i),e.exports=i},{"./hiraya-core/class":2,"./hiraya-core/emitter":3,"./hiraya-game/stat":4,"./hiraya-core/collection":5,"./hiraya-game/stats":6,"./hiraya-game/entity-turnbased":7,"./hiraya-game/entity":8,"./hiraya-game/game":9,"./hiraya-game/tile":10,"./hiraya-game/tiles":11,"./hiraya-game/level":12,"./hiraya-game/level-turnbased":13}],2:[function(t,e){function i(t,e,i){return function(){return this.parent=t[e],i.apply(this,arguments)}}function n(t){var e=!1;for(var i in t.prototype)e=!0;return e}function r(t,e){function a(){s&&this.init&&this.init.apply&&this.init.apply(this,arguments)}var o=t.prototype;s=!1;var h=new t;s=!0;var u;for(var c in e)e.hasOwnProperty(c)&&(u=e[c],h[c]="function"!=typeof o[c]||"function"!=typeof u||n(u)?u:i(o,c,u));return a.prototype=h,a.prototype.constructor=a,a.extend=function(){for(var t=Array.prototype.slice.apply(arguments,arguments,0),e={},i=0;t.length>i;i++){var n=t[i];for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}return r(a,e)},a.create=function(t){var e;return"object"==typeof t?(e=a.extend(t),new e):new a},a}var s=!0,a=r(function(){},{});e.exports=a},{}],14:[function(t,e){var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var i=[];return window.addEventListener("message",function(t){if(t.source===window&&"process-tick"===t.data&&(t.stopPropagation(),i.length>0)){var e=i.shift();e()}},!0),function(t){i.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.binding=function(){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw Error("process.chdir is not supported")}},{}],15:[function(t,e,i){(function(t){function e(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;t.length>i;i++)if(e===t[i])return i;return-1}t.EventEmitter||(t.EventEmitter=function(){});var n=i.EventEmitter=t.EventEmitter,r="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=10;n.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},n.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||r(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var i=Array.prototype.slice.call(arguments,1);e.apply(this,i)}return!0}if(r(e)){for(var i=Array.prototype.slice.call(arguments,1),n=e.slice(),s=0,a=n.length;a>s;s++)n[s].apply(this,i);return!0}return!1},n.prototype.addListener=function(t,e){if("function"!=typeof e)throw Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t])if(r(this._events[t])){if(!this._events[t].warned){var i;i=void 0!==this._events.maxListeners?this._events.maxListeners:s,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}this._events[t].push(e)}else this._events[t]=[this._events[t],e];else this._events[t]=e;return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){var i=this;return i.on(t,function n(){i.removeListener(t,n),e.apply(this,arguments)}),this},n.prototype.removeListener=function(t,i){if("function"!=typeof i)throw Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var n=this._events[t];if(r(n)){var s=e(n,i);if(0>s)return this;n.splice(s,1),0==n.length&&delete this._events[t]}else this._events[t]===i&&delete this._events[t];return this},n.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},n.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),r(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}})(t("__browserify_process"))},{__browserify_process:14}],3:[function(t,e){var i=t("./class"),n=t("events").EventEmitter,r=i.extend({init:function(){},on:function(){return n.prototype.on.apply(this,arguments),this},off:function(){return n.prototype.removeListener.apply(this,arguments),this},offAll:function(){return n.prototype.removeAllListeners.apply(this,arguments),this},emit:function(){return n.prototype.emit.apply(this,arguments),this},once:function(){return n.prototype.once.apply(this,arguments),this},removeListener:function(){return n.prototype.removeListener.apply(this,arguments),this}});e.exports=r},{events:15,"./class":2}],4:[function(t,e){var i=t("../hiraya-core/class"),n=i.extend({value:null,max:null,name:null,init:function(){this.reset(Math.max(this.value,this.max))},setValue:function(t){return this.value=Math.max(0,t),this.value=Math.min(this.value,this.max),this},setMax:function(t){return this.max=Math.max(0,t),this},empty:function(){return this.value=0,this},add:function(t){return this.setValue(this.value+("number"==typeof t?t:1)),this},reduce:function(t){return this.setValue(this.value-("number"==typeof t?t:1)),this},reset:function(t){return"number"==typeof t&&this.setMax(t),this.value=this.max,this},isMax:function(){return this.value===this.max},isEmpty:function(){return 0===this.value}});e.exports=n},{"../hiraya-core/class":2}],5:[function(t,e){var i=t("./emitter"),n=i.extend({_list:null,length:null,init:function(){this._list=[],this._updateLength()},_updateLength:function(){this.length=this._list.length},add:function(t){return this._list.push(t),this._updateLength(),this},remove:function(t){return this._list.splice(this._list.indexOf(t),1),this._updateLength(),this},at:function(t){return this._list[t]},each:function(t){for(var e=0,i=this._list.length;i>e&&t(this._list[e])!==!1;e++);}});e.exports=n},{"./emitter":3}],6:[function(t,e){var i=t("../hiraya-core/class"),n=t("./stat"),r=i.extend({none:null,init:function(){this.set("none",0,0)},set:function(t,e,i){var r=this[t],s="number"==typeof i?i:e;return r?(r.setMax(s),r.setValue(e)):this[t]=n.create({name:t,value:e,max:s}),this},get:function(t){return this[t]?this[t]:this.none}});e.exports=r},{"../hiraya-core/class":2,"./stat":4}],7:[function(t,e){var i=t("./entity"),n=i.extend({init:function(){this.parent(),this.stats.set("turn",0,100),this.stats.set("turnspeed",10)}});e.exports=n},{"./entity":8}],8:[function(t,e){var i=t("../hiraya-core/getter-setter"),n=t("./stats"),r=i.extend({id:null,init:function(){void 0===this.id&&(this.id=r.id++),this.stats=n.create(),this.stats.set("health",100).set("attack",100),this.parent()},attack:function(t){return t.damage(this.stats.attack.value),this},damage:function(t){return this.stats.health.reduce(t),this},setStats:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=Stat.create({max:t[e]}))}});r.id=0,e.exports=r},{"../hiraya-core/getter-setter":16,"./stats":6}],9:[function(t,e){var i=t("../hiraya-core/emitter"),n=t("../hiraya-game/level");t("../hiraya-game/tiles");var r=i.extend({_paths:{},Level:n,start:function(){this._paths={},this._paths["levels:main"]=this.Level.create(),this.ready()},paths:function(t){return this._paths[t]},ready:function(){}});e.exports=r},{"../hiraya-core/emitter":3,"../hiraya-game/level":12,"../hiraya-game/tiles":11}],10:[function(t,e){var i=t("../hiraya-core/class"),n=i.extend({x:null,y:null,z:null,wall:null,entities:null,val:function(){return this.entities.length||this.wall?1e3:1},init:function(){this.entities=[]},json:function(){return{x:this.x,y:this.y,z:this.z}},occupy:function(t){this.has(t)||(this.entities.push(t),t.set("tile",this))},has:function(t){return this.entities.indexOf(t)>-1},vacate:function(t){return this.has(t)&&(t.set("tile",null),this.entities.splice(this.entities.indexOf(t),1)),this},isOccupied:function(){return this.entities.length>0}});e.exports=n},{"../hiraya-core/class":2}],11:[function(t,e){var i=t("../hiraya-core/class"),n=t("./tile"),r=i.extend({columns:8,rows:8,_matrix:null,_total:null,Tile:n,init:function(){this._generate()},_generate:function(){this._matrix=[],this._total=0;for(var t=0;this.rows>t;t++){this._matrix.push([]);for(var e=0;this.columns>e;e++){var i=this.Tile.create();i.x=e,i.y=t,i.z=this._total,this._matrix[t].push(i),this._total++}}},get:function(t,e){return this._matrix[e][t]}});e.exports=r},{"../hiraya-core/class":2,"./tile":10}],12:[function(t,e){var i=t("../hiraya-core/getter-setter"),n=t("../hiraya-core/collection"),r=t("./entity"),s=t("./tiles"),a=i.extend({entities:null,Entity:r,Tiles:s,init:function(){this.tiles=this.Tiles.create(),this.entities=n.create(),this.parent(),this.ready()},ready:function(){},addEntity:function(t){var e,i,n;if(e=this.createEntity(t),i=t.stats,"object"==typeof i)for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];e.stats.set(r,s[0],s[1])}return"object"==typeof t.tile&&(n=this.tiles.get(t.tile.x,t.tile.y),n&&n.occupy(e)),this.entities.add(e),this.addedEntity(e),this},createEntity:function(t){return this.Entity.create(t)},addedEntity:function(){}});e.exports=a},{"../hiraya-core/getter-setter":16,"../hiraya-core/collection":5,"./entity":8,"./tiles":11}],13:[function(t,e){var i=t("./level"),n=t("./entity-turnbased"),r=i.extend({Entity:n,_tickSpeed:1,_turnTimeout:null,getTurn:function(){var t,e=this,i=function(){t=e._getEntityTurn(),t?(t.stats.turn.empty(),e.gotTurn(t)):setTimeout(function(){i()},e._tickSpeed)};i()},gotTurn:function(){},_getEntityTurn:function(){for(var t,e,i=this.entities.length,n=0;i>n;n++)if(t=this.entities.at(n),t.stats.turn.add(t.stats.get("turnspeed").value),t.stats.turn.isMax()){e=t;break}return e},evaluateEntities:function(){var t=[],e=[];this.entities.each(function(i){i.stats.health.isEmpty()?e.push(i):t.push(i)}),1>=t.length&&this.hasWinner(t[0])},hasWinner:function(){}});e.exports=r},{"./level":12,"./entity-turnbased":7}],16:[function(t,e){var i=t("./emitter"),n=i.extend({set:function(t,e){return this[t]=e,this.emit(t,e),this},get:function(t){return this.hasOwnProperty(t)?this[t]:null}});e.exports=n},{"./emitter":3}]},{},[1]);